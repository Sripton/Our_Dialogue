üìå –ü–æ—á–µ–º—É –≤—Å—ë –µ—â—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä Addposts
–Ø –ø–∏—à—É:
export default memo(Addposts);

–ù–æ Addposts –ø–æ–ª—É—á–∞–µ—Ç:
props: {
  id,
  inputs,              // –æ–±—ä–µ–∫—Ç ‚Äî –Ω–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –ø—Ä–∏ –ª—é–±–æ–º setInputs
  inputPostHandler,    // useCallback ‚Äî –æ–∫
  submitPostHandler,   // useCallback –∑–∞–≤–∏—Å–∏—Ç –æ—Ç inputs => –Ω–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–≤–æ–¥–µ
  filteredPosts        // useMemo –∑–∞–≤–∏—Å–∏—Ç –æ—Ç posts => –Ω–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –ø–æ—Å—Ç–µ
}

üî¥ –ó–Ω–∞—á–∏—Ç: memo –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ props-—Å—Å—ã–ª–∫–∏ –º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑.



üß† –ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å posttitle –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –µ—Å–ª–∏ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏—é
üîπ –ü–æ—Ç–æ–º—É —á—Ç–æ posttitle –Ω–µ –∑–∞–º—ã–∫–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
const submitPostHandler = useCallback(async (e, posttitle) => {
  // –∑–¥–µ—Å—å  –∏—Å–ø–æ–ª—å–∑—Ée—Ç—Å—è `posttitle`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –í–ù–£–¢–†–¨ —Ñ—É–Ω–∫—Ü–∏–∏
  // –∞ –Ω–µ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ scope (–∏–∑ —Å—Ç–µ–π—Ç–∞ `inputs`)
}, []);
–¢.–µ. submitPostHandler –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç inputs.posttitle
–ü—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∞–µ–º –µ–≥–æ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Äî –∏ –≤—Å—ë ‚úÖ


üö® –ê –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å —Ç–∞–∫:
const submitPostHandler = useCallback(async (e) => {
  const posttitle = inputs.posttitle; // ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ scope
}, []);

üëâ –¢–æ–≥–¥–∞ inputs.posttitle –∑–∞–º—ã–∫–∞–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏,
–∏ —á—Ç–æ–±—ã React –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞–ª submitPostHandler –ø—Ä–∏ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏,
 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–¥–æ –ø–∏—Å–∞—Ç—å [inputs.posttitle] –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö.

üîÅ –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:
–°—Ü–µ–Ω–∞—Ä–∏–π	–ù—É–∂–Ω–æ –≤ [deps]?
–ò—Å–ø–æ–ª—å–∑—É–µ—à—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ scope	‚úÖ –î–∞
–ü–µ—Ä–µ–¥–∞—ë—à—å –µ—ë –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö	‚ùå –ù–µ—Ç

‚úÖ –ü–æ—ç—Ç–æ–º—É  –∫–æ–¥:
const submitPostHandler = useCallback(async (e, posttitle) => {
  // —Ç—É—Ç posttitle –ù–ï –∏–∑ useState ‚Äî —ç—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç
}, []);
–º–æ–∂–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ –∏–º–µ—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π [] ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.


üîß –ü—Ä–∏–º–µ—Ä 1: –ó–∞–º—ã–∫–∞–Ω–∏–µ ‚Äî –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
let message = "Hello";

function sayHi() {
  console.log(message); // –±–µ—Ä–µ—Ç `message` –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ scope
}

sayHi(); // ‚Üí Hello

message = "–ü—Ä–∏–≤–µ—Ç";

sayHi(); // ‚Üí –ü—Ä–∏–≤–µ—Ç ‚úÖ

–§—É–Ω–∫—Ü–∏—è sayHi –∑–∞–º—ã–∫–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é message, –∏ –±—É–¥–µ—Ç –±—Ä–∞—Ç—å –µ—ë –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π, 
–ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é


üîß –ü—Ä–∏–º–µ—Ä 2: –ó–∞–º—ã–∫–∞–Ω–∏–µ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è
–¢–µ–ø–µ—Ä—å ‚Äî –∞–Ω–∞–ª–æ–≥–∏—è —Å useCallback:

function makeGreeter(greeting) {
  return function () {
    console.log(greeting); // ‚Üê —ç—Ç–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ: greeting –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ!
  };
}

const greetHello = makeGreeter("Hello");
const greetHi = makeGreeter("Hi");

greetHello(); // ‚Üí Hello
greetHi();    // ‚Üí Hi

–ó–¥–µ—Å—å greeting –ø–æ–ø–∞–¥–∞–µ—Ç –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ "–∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è" ‚Äî –∫–∞–∫ –∏ inputs.posttitle –≤–Ω—É—Ç—Ä–∏ useCallback


üîÅ –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ React:
‚ùå –¢–∞–∫ –¥–µ–ª–∞—Ç—å –Ω—É–∂–Ω–æ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:
const submitPostHandler = useCallback(() => {
  // –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–∞ inputs.posttitle!
  fetch("/api", {
    body: JSON.stringify({ posttitle: inputs.posttitle }),
  });
}, [inputs.posttitle]); // ‚Üê –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!

‚úÖ –ê —Ç–∞–∫ ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
const submitPostHandler = useCallback((e, posttitle) => {
  // –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–º—ã–∫–∞–Ω–∏–π, –≤—Å—ë –ø—Ä–∏—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç
  fetch("/api", {
    body: JSON.stringify({ posttitle }),
  });
}, []); // ‚Üê –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º




üîç –ö–æ–≥–¥–∞ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å inputPostHandler –≤ useCallback?
‚úÖ –û–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –µ—Å–ª–∏:
Postform –æ–±—ë—Ä–Ω—É—Ç –≤ React.memo
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –ª–∏—à–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã
–ò inputPostHandler –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –Ω–µ–≥–æ –∫–∞–∫ –ø—Ä–æ–ø—Å

üí° –ê –µ—Å–ª–∏?
Postform ‚Äî –Ω–µ –æ–±—ë—Ä–Ω—É—Ç –≤ React.memo ‚Üí –∑–Ω–∞—á–∏—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ inputs
–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: useCallback –Ω–∞ inputPostHandler –Ω–µ –¥–∞—ë—Ç –Ω–∏–∫–∞–∫–æ–π –ø–æ–ª—å–∑—ã


üß† –ë–æ–ª–µ–µ —Ç–æ–≥–æ:
const inputPostHandler = useCallback((e) => {
  const { name, value } = e.target;
  setInputs((prev) => ({ ...prev, [name]: value }));
}, []);
[] ‚Äî –∑–Ω–∞—á–∏—Ç, —Ñ—É–Ω–∫—Ü–∏—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è,
–Ω–æ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤ –±—É–¥—É—â–µ–º –∏–∑–º–µ–Ω–∏—Ç—å setInputs, —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–∞–≥.


‚úÖ –õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–≤–æ–µ–≥–æ —Å–ª—É—á–∞—è
–ï—Å–ª–∏  –Ω–µ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å Postform –≤ React.memo,
—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–±—ã—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:

const inputPostHandler = (e) => {
  const { name, value } = e.target;
  setInputs((prev) => ({ ...prev, [name]: value }));
};
–≠—Ç–æ –ø—Ä–æ—â–µ, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –ª–æ–∂–Ω–æ–≥–æ –æ—â—É—â–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.


üìå –ö–æ–≥–¥–∞ –≤—Å—ë –∂–µ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å?
const inputPostHandler = useCallback((e) => {
  ...
}, [setInputs]);
–ò —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Postform –±—É–¥–µ—Ç –æ–±—ë—Ä–Ω—É—Ç –≤ memo():

export default memo(Postform);

‚úç –í—ã–≤–æ–¥:
–°–∏—Ç—É–∞—Ü–∏—è	–ù—É–∂–Ω–æ useCallback?
Postform –ù–ï –≤ memo	‚ùå –ù–µ—Ç —Å–º—ã—Å–ª–∞
Postform –í memo, –∏ —Ç—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å props	‚úÖ –î–∞, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å




–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ—Ç–æ—Ä–æ–π —è —Å—Ç–æ–ª–∫–Ω—É–ª—è –ø—Ä–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ (—Å–æ–∑–¥–∞–Ω–∏—è) –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤  (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–≤–æ–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è)
 ‚úÖ –õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useImperativeHandle + forwardRef
–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—Ç—å –≤–Ω–µ—à–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.
import React, {
  useState,
  useEffect,
  forwardRef,
  useImperativeHandle,
} from "react";

const CommentSection = forwardRef(({ post, userIDsession }, ref) => {
  const [allComments, setAllComments] = useState([]);

  useEffect(() => {
    fetch(`/api/comments/${post.id}`)
      .then((res) => res.json())
      .then((data) => setAllComments(data))
      .catch(console.log);
  }, [post.id]);

  // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—Ä—É–∂—É setAllComments
  useImperativeHandle(ref, () => ({
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
    addComment: (newComment) => {
      setAllComments((prev) => [...prev, newComment]);
    },
    üîπ –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∑–∞–º–µ–Ω—è–µ—Ç –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ –Ω–æ–≤—ã–π list.
    setComments: (list) => {
      setAllComments(list);
    },
    üìå –ó–∞—á–µ–º —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è?
‚úÖ 1. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è / —É–¥–∞–ª–µ–Ω–∏—è
// –ù–∞–ø—Ä–∏–º–µ—Ä:
// —É–¥–∞–ª–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π,
// –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞,
// –∏ —Ö–æ—á–µ—à—å —Å—Ä–∞–∑—É –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –≤–µ—Å—å allComments.
// –ü—Ä–∏–º–µ—Ä
// const updatedList = await fetchUpdatedComments();
// commentRef.current.setComments(updatedList);

‚úÖ 3. –°–±—Ä–æ—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ—Å—Ç–∞)
// commentRef.current.setComments([]);
  }));

  return (
    <>
      {allComments.map((comment) => (
        <div key={comment.id}>{comment.commenttitle}</div>
      ))}
    </>
  );
});

export default CommentSection;



–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è   const [allComments, setAllComments] = useState([]);
–≤ Postcard.jsx —Å—Ç–æ–∏—Ç –≤–æ–ø—Ä–æ—Å –ø–µ—Ä–µ—Ä–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –∫–æ–≥–¥–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –º–∞–ª–æ,  
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –ù–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ 
–≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ä–∞—Å—Ç—É—Ç –∫–æ-–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –î–ª—è —ç—Ç–æ–≥–æ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å react-window
react-window - –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫. –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–∏–º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –∞ –Ω–µ –≤–µ—Å—å –º–∞—Å—Å–∏–≤.
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É npm install react-window

